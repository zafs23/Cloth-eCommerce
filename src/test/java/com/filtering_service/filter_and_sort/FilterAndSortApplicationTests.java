package com.filtering_service.filter_and_sort;
import static org.hamcrest.Matchers.*;
import org.junit.jupiter.api.Test;

import org.springframework.boot.test.context.SpringBootTest;




//import org.junit.Test;
import org.junit.jupiter.api.DisplayName;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.annotation.DirtiesContext;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.web.servlet.MockMvc;


import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;
import static org.hamcrest.Matchers.hasSize;
@RunWith(SpringJUnit4ClassRunner.class)
@SpringBootTest
@DirtiesContext(classMode = DirtiesContext.ClassMode.BEFORE_EACH_TEST_METHOD)
@AutoConfigureMockMvc
public class FilterAndSortApplicationTests {
    @Autowired
    private MockMvc mockMvc;

    
    @Test
    @DisplayName("Filter Price Check 1")   
    public void FilterPrice1() throws Exception {
        mockMvc.perform(get("/filter/price/100/4500"))
                .andDo(print())
                .andExpect(jsonPath("$.*").isArray())
                .andExpect(jsonPath("$.*", hasSize(453)))
                .andExpect(jsonPath("$[*].barCode", containsInRelativeOrder("74001755", "74002423", "74000848", "74001399", "74001073", "47000432", "74001060", "74001147", "74001360", "74000956", "74001773", "74000618", "74001266", "74001655", "74000078", "74002027", "74000964", "74000062", "74001409", "74000431", "47000076", "74000640", "74001035", "74002082", "74001151", "74001367", "74001689", "74002361", "74001930", "74002280", "74001885", "74000643", "74001436", "74001968", "74001423", "74001176", "47000192", "74001914", "74001389", "74001609", "74002373", "74001929", "74001093", "74002312", "74000134", "47000024", "74000629", "74001381", "74001788", "47000479", "74001625", "74002271", "74002124", "74000378", "47000487", "47000009", "74001825", "74000025", "74001172", "74002006", "74001568", "47000150", "74001164", "74000184", "74000818", "74001357", "74001345", "74001422", "74002406", "74001006", "74002113", "74002205", "74001134", "47000354", "74001282", "74001569", "74002413", "74000439", "74001783", "74001066", "74001183", "74002360", "47000154", "47000099", "74000481", "74000321", "74001800", "74002333", "74001672", "74000045", "74002221", "74001835", "74002154", "74002147", "74001732", "74001717", "74001262", "47000193", "74000151", "74000563", "74000569", "74001192", "47000107", "74001525", "74000770", "74000015", "74001260", "74000312", "74001178", "47000303", "74000331", "47000299", "74000370", "47000228", "74000061", "74000630", "74000442", "74002378", "74001361", "74001424", "47000399", "47000453", "74000905", "74002043", "74002264", "74000716", "74001620", "74000814", "74001918", "74002270", "74000462", "47000104", "74001319", "47000224", "74000592", "74000973", "74001101", "74000764", "74002204", "47000049", "74002432", "74000409", "74000658", "74001199", "74001067", "74000995", "74001815", "74000891", "74000021", "74000876", "47000496", "47000317", "74000023", "74001513", "74001765", "74001521", "47000026", "74000515", "74000929", "47000434", "74001171", "74002079", "74002257", "74001305", "47000059", "74000624", "74002200", "47000138", "74001083", "74001284", "74000011", "74001740", "47000428", "74000175", "74002243", "74002330", "74002190", "74001123", "74001746", "74000246", "74000916", "74000815", "74002259", "74001375", "74001519", "74000976", "74001947", "74001452", "47000448", "47000230", "47000446", "74000703", "74001344", "74002481", "74002101", "74002013", "47000295", "74002417", "74001607", "47000280", "74001137", "74002094", "74001467", "74000832", "74002306", "74001443", "74001526", "74000979", "74000518", "74000053", "74000248", "74002002", "74001992", "74000553", "74000233", "74002184", "74002433", "74002414", "74001654", "47000002", "74000880", "74001891", "74002152", "74000659", "74000972", "74001036", "74000864", "74002003", "74000496", "47000379", "74002098", "74000603", "74000435", "74000286", "74001629", "74001792", "74002345", "74000476", "74000890", "74000190", "74002466", "74001454", "74001386", "74000894", "74001528", "74000552", "47000469", "74001248", "74001170", "74000607", "74000936", "74002135", "74000105", "74000642", "74000306", "74001104", "74000718", "74000358", "74000550", "74001944", "47000039", "47000472", "74000205", "74001446", "47000362", "74001492", "74000715", "74000066", "47000130", "74001645", "74000662", "74000452", "74000507", "74002363", "74001384", "74000033", "74000344", "74002443", "74001146", "47000483", "74002008", "74000660", "74000348", "74002401", "74000327", "74000631", "74001025", "74000948", "74000867", "47000338", "74002232", "74000943", "74000732", "74001428", "74001029", "74000449", "74002486", "74000595", "74000104", "47000335", "74002377", "74001401", "74000771", "74000744", "47000142", "47000003", "74000101", "47000162", "74001267", "74001005", "47000019", "74001770", "74001539", "74000421", "74000955", "74002045", "74000382", "74000154", "74000491", "74000911", "74000451", "74001538", "74000693", "74002324", "74002076", "74002261", "74002186", "74000489", "74001275", "74001440", "74001098", "74001724", "74000047", "74001218", "74000147", "74001958", "74000478", "74001173", "47000106", "74000145", "47000015", "74001878", "74002046", "74000272", "74001181", "47000329", "47000168", "74001758", "74001000", "47000145", "74001948", "47000235", "74000512", "74000712", "74001379", "74002011", "74001444", "47000323", "74002031", "74001290", "74001622", "74002156", "74000231", "74000781", "74000420", "74001595", "74000806", "74001376", "74000158", "74000665", "47000185", "74001364", "74001332", "74000610", "74001395", "74001795", "74000753", "74000141", "74002086", "74001934", "74000505", "74002042", "74000524", "74001572", "74001670", "74002390", "74001614", "74000441", "74001112", "74001600", "74001687", "74002421", "74000071", "47000484", "74000875", "74000242", "74000379", "74002173", "74001823", "74000019", "74000578", "74002496", "74001899", "74001537", "74001450", "74001158", "74002455", "74000521", "74000585", "74000192", "74001720", "74001184", "47000094", "74001473", "74000381", "74001462", "74000388", "47000050", "47000143", "74002194", "74000605", "74001639", "74001038", "74000352", "74001630", "74002422", "74001700", "74001238", "74002273", "74000456", "74000455", "74002485", "74000509", "47000336", "74002227", "74001139", "74000186", "74000883", "74000092", "74000580", "74000773", "74002142", "74001594", "74001349", "74001676", "74002026", "47000441", "74002222", "74001355", "74002310", "74001908", "74000710", "47000394")))
                .andExpect(status().is2xxSuccessful());
    }
    
    @Test
    @DisplayName("Filter Price Check 2")   
    public void FilterPriceCheck2() throws Exception {
        mockMvc.perform(get("/filter/price/100/101"))
                .andDo(print())
                .andExpect(status().is4xxClientError());
    }
    
    @Test
    @DisplayName("Filter Price Check 3")   
    public void FilterPriceCheck3() throws Exception {
        mockMvc.perform(get("/filter/price/500/3650"))
                .andDo(print())
                .andExpect(jsonPath("$.*").isArray())
                .andExpect(jsonPath("$.*", hasSize(318)))
                .andExpect(jsonPath("$[*].barCode", containsInRelativeOrder("74001755", "74002423", "74000848", "74001399", "47000432", "74001060", "74001360", "74000618", "74001266", "74001655", "74000078", "74002027", "74000964", "74000062", "74000431", "74000640", "74001035", "74002082", "74001151", "74001367", "74001689", "74001930", "74002280", "74001436", "74001423", "74001176", "47000192", "74001914", "74001389", "74001609", "74002373", "74001929", "74001093", "74002312", "47000024", "74001381", "47000479", "74001625", "74002271", "74000378", "47000009", "74001825", "74000025", "74001568", "47000150", "74001164", "74000184", "74000818", "74001357", "74001345", "74002406", "74001006", "74002113", "74002205", "74001134", "47000354", "74001282", "74001569", "74000439", "74001783", "74001066", "74001183", "74002360", "47000099", "74000481", "74000321", "74001800", "74002333", "74000045", "74002221", "74001835", "74002154", "74002147", "74001732", "74001717", "74001262", "74000151", "74000563", "74000569", "47000107", "74001525", "47000303", "74000331", "47000299", "47000228", "74000630", "74000442", "74002378", "74001424", "47000399", "47000453", "74000905", "74002264", "74000716", "74001620", "74000814", "74001918", "74002270", "74000462", "47000104", "74001319", "47000224", "74000973", "74001101", "74002204", "74000658", "74001199", "74000995", "74001815", "74000891", "74000021", "74000876", "47000317", "74000023", "74001513", "74001765", "74001521", "47000026", "74000515", "74000929", "47000434", "74001171", "74002079", "74001305", "47000059", "74002200", "74001083", "74001284", "74000011", "74001740", "47000428", "74002330", "74002190", "74001123", "74000246", "74000916", "74000815", "74001519", "74000976", "74001947", "47000448", "47000230", "47000446", "74000703", "74001344", "74002481", "74002101", "74002417", "74001607", "74001137", "74002094", "74001467", "74000832", "74001443", "74001526", "74000979", "74000053", "74000248", "74000553", "74000233", "74002433", "74002414", "74001654", "47000002", "74002152", "74000659", "74000972", "74000864", "47000379", "74002098", "74000603", "74000435", "74000286", "74001629", "74001792", "74002345", "74000476", "74000890", "74000190", "74002466", "74001454", "74000894", "74001528", "47000469", "74001248", "74000607", "74000936", "74002135", "74000105", "74000642", "74000306", "74000718", "74000358", "74000550", "74001944", "47000472", "74000205", "74001492", "74000715", "74000066", "47000130", "74001645", "74000662", "74000452", "74000507", "74002363", "74000033", "74000344", "74002443", "74001146", "47000483", "74002008", "74000660", "74002401", "74000327", "74001025", "74000948", "74000867", "74002232", "74000943", "74001428", "74001029", "74002486", "74000595", "74000104", "47000335", "74002377", "74001401", "74000744", "47000142", "47000003", "74000101", "74001005", "47000019", "74001770", "74001539", "74000955", "74002045", "74000154", "74001538", "74002324", "74002076", "74000489", "74001275", "74001440", "74001724", "74000047", "74000147", "74000478", "74001173", "47000106", "47000015", "74000272", "74001181", "47000329", "47000145", "74001948", "47000235", "74000712", "74001379", "74002031", "74001290", "74001622", "74002156", "74000781", "74000420", "74001376", "74000158", "74000665", "47000185", "74001395", "74001795", "74000753", "74001934", "74000505", "74001572", "74001670", "74002390", "74001112", "74001600", "74001687", "74000071", "47000484", "74001823", "74000019", "74000578", "74002496", "74001899", "74001158", "74002455", "74000585", "74001720", "74001184", "47000094", "74001473", "74000381", "74001462", "74000388", "47000050", "74000605", "74001639", "74001038", "74000352", "74002422", "74000456", "74000455", "74000509", "74001139", "74000580", "74000773", "74002142", "74001676", "74002026", "47000441", "74001355", "74002310", "74000710", "47000394")))
                .andExpect(status().is2xxSuccessful());
    }
    
    
    @Test
    @DisplayName("Filter Price Check 4")   
    public void FilterPriceCheck4() throws Exception {
        mockMvc.perform(get("/filter/price/3520/3000"))
        		.andDo(print())
        		.andExpect(status().is4xxClientError());
    }
    
    

    @Test
    @DisplayName("Sort Check ")   
    public void SortCheck() throws Exception {
        mockMvc.perform(get("/sort/price"))
                .andDo(print())
                .andExpect(jsonPath("$.*").isArray())
                .andExpect(jsonPath("$.*", hasSize(500)))
                .andExpect(jsonPath("$[*].barCode", containsInRelativeOrder("47000395" , "74001729" , "47000380" , "47000256" , "74001858" , "74000928" , "74000737" , "74000787" , "74001220" , "74001384" , "47000323" , "74001450" , "74002002" , "74001409" , "74000880" , "47000154" , "74002421" , "74001630" , "74001452" , "74000449" , "47000362" , "74001992" , "47000162" , "74000956" , "74000409" , "74000806" , "74000145" , "74000382" , "74002227" , "74002046" , "74002013" , "74002485" , "74000491" , "74001238" , "74000141" , "74000092" , "74000186" , "47000143" , "74002003" , "74001444" , "74000312" , "47000039" , "74000175" , "74000631" , "74001386" , "74001422" , "74001537" , "74001614" , "74001891" , "47000049" , "74002413" , "74000231" , "74001672" , "74001098" , "74000134" , "74001000" , "47000303" , "74001436" , "74000605" , "74000381" , "74000019" , "74000184" , "74000025" , "74002027" , "47000428" , "74001947" , "74002190" , "74000976" , "74000505" , "47000483" , "74000640" , "74001815" , "74001687" , "47000317" , "74002360" , "47000228" , "74000894" , "74002363" , "74000327" , "74001184" , "74001732" , "47000059" , "47000484" , "74001151" , "74002232" , "74002310" , "74002333" , "47000107" , "74000442" , "74000023" , "47000448" , "74000047" , "74001440" , "74000964" , "74000246" , "74001755" , "74000272" , "74002156" , "74001929" , "74000569" , "74001275" , "74001625" , "74001367" , "74000891" , "47000106" , "74001137" , "74001639" , "74002142" , "74000848" , "74002466" , "47000192" , "47000354" , "74000718" , "74001654" , "74001934" , "47000441" , "74000553" , "74000781" , "74001381" , "47000104" , "74002200" , "74000321" , "74001443" , "74000233" , "74002433" , "74002204" , "74002486" , "74000062" , "74001795" , "74001428" , "74000358" , "74001183" , "74001379" , "74000435" , "74000712" , "74001538" , "74001717" , "74001783" , "74001424" , "74001025" , "47000399" , "74002008" , "74002390" , "74001622" , "74001724" , "47000432" , "74000352" , "74001112" , "74002205" , "74001569" , "74001248" , "74002481" , "74001038" , "47000130" , "74000101" , "74001513" , "74000936" , "74000864" , "74001519" , "74001060" , "74000306" , "74001035" , "74001146" , "74000929" , "74000710" , "74001930" , "74000603" , "74001093" , "74000595" , "74000331" , "74001181" , "74001825" , "74000642" , "74001765" , "74001401" , "74001389" , "74000580" , "74001607" , "74001376" , "74002417" , "74000618" , "47000394" , "47000050" , "74001164" , "74001360" , "74001282" , "74000630" , "74001539" , "74001319" , "74001395" , "74001262" , "47000009" , "74000979" , "47000235" , "74001572" , "74000876" , "74001492" , "74002094" , "74001645" , "74000455" , "74000147" , "74000420" , "74002098" , "74001305" , "74002152" , "47000453" , "74000973" , "74000378" , "47000099" , "47000019" , "74002271" , "74002401" , "74001655" , "74002345" , "74001629" , "47000094" , "74001899" , "74000509" , "74001462" , "74001199" , "74001526" , "74000078" , "47000299" , "74002312" , "74002026" , "74001173" , "74000818" , "74000045" , "74000995" , "74001792" , "74000972" , "74000190" , "74000439" , "74000773" , "74002221" , "47000479" , "74001176" , "47000446" , "74001770" , "74002101" , "74000659" , "47000469" , "74001344" , "47000185" , "74000158" , "74000456" , "74000104" , "74000066" , "47000150" , "47000024" , "74000744" , "74002443" , "74000431" , "74000286" , "74000563" , "74002422" , "74000660" , "74002270" , "74001066" , "74000916" , "74001006" , "74001290" , "74001266" , "74001134" , "74001835" , "74000105" , "47000002" , "74000481" , "74001101" , "74001800" , "74000814" , "74002377" , "47000142" , "47000335" , "74002076" , "74001918" , "74000507" , "74000662" , "74001123" , "74000515" , "74001467" , "74001521" , "47000379" , "74000716" , "74001399" , "74001345" , "74001670" , "74000151" , "74000753" , "74000476" , "47000472" , "74001525" , "74001454" , "47000329" , "74001720" , "74002373" , "74000550" , "74001609" , "74001944" , "74001005" , "74002082" , "74000665" , "74000021" , "74000478" , "74002406" , "74001029" , "74000248" , "74000053" , "47000230" , "74002045" , "74002154" , "74001568" , "74000452" , "47000224" , "74001823" , "74000033" , "74001689" , "74001473" , "74001171" , "74001600" , "74002414" , "47000003" , "74001355" , "74001139" , "74002031" , "74001284" , "74001158" , "74002135" , "74001083" , "74002113" , "74001423" , "47000145" , "47000015" , "74000607" , "74002280" , "74002455" , "74000071" , "74002378" , "74000388" , "74002496" , "74000948" , "74000154" , "74001357" , "74000890" , "74000344" , "74000578" , "74000011" , "74000905" , "74001528" , "74000703" , "47000434" , "74000715" , "74002330" , "74000867" , "74000462" , "74000585" , "74000943" , "74002264" , "74000955" , "74002147" , "74002079" , "74002423" , "74001740" , "74000815" , "74000489" , "47000026" , "74001948" , "74000832" , "74002324" , "74001914" , "74000205" , "74000658" , "74001620" , "74001676" , "74000518" , "74000592" , "74002306" , "74002361" , "74000883" , "74000643" , "74000451" , "74000693" , "74001147" , "47000336" , "74001178" , "74002257" , "74001104" , "74000379" , "74000629" , "74002243" , "74002273" , "74001192" , "47000168" , "47000295" , "47000193" , "74000732" , "74002222" , "74001773" , "74000771" , "74001332" , "74000015" , "47000280" , "74001375" , "74002194" , "74001170" , "47000138" , "74001349" , "74000610" , "47000076" , "74001260" , "74000192" , "74000911" , "74001067" , "74000521" , "74000770" , "74000624" , "74002173" , "74002042" , "74001746" , "74001700" , "74001172" , "74001073" , "74002124" , "74001267" , "47000487" , "74001968" , "74002261" , "74002086" , "74001218" , "74001036" , "74001758" , "74001446" , "74001361" , "74000552" , "47000338" , "74000348" , "74001595" , "74000496" , "74000421" , "74001908" , "74002184" , "74000764" , "74000441" , "74000875" , "74000512" , "74000242" , "47000496" , "74001885" , "74000370" , "74002006" , "74002011" , "74002043" , "74001958" , "74001788" , "74000061" , "74001594" , "74002186" , "74002259" , "74000524" , "74001878" , "74002432" , "74001364" , "47000368" , "74001703" , "74001427" , "74002267" , "74000013" , "74000986" , "74001762" , "74002133" , "74001077" , "74001866" , "74001230" , "74002233" , "74002134" , "74001979" , "74001919" , "74001735" , "47000485" , "74001484" , "47000194" , "47000028" , "74000714" , "47000493" , "74000750" , "74000389" , "74002159" , "74002226" , "74001883" , "74002328" , "74002407" , "74001431" , "74002157" , "47000207" , "74002115" , "74002362" , "74001845" , "74001967" , "74001177" , "74000886" )))
                .andExpect(status().is2xxSuccessful());
    }
    

}


